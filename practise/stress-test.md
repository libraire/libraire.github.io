# 第x章：压测

### 通用压测注意事项

1. 数据库线程数控制40.数据库服务器核数是40，并发数超过40的话就存在 SQL 堆积了.
2. Redis注意IO吞吐量, 预防大块数据存取.





### 压测条件：

1.关联属性增加虚拟城市 @韩佳伟 

2.虚拟城市知识点 @王东硕

3.知贝自测应用添加题库 @王东硕

4.题库添加题目-虚拟城市，虚拟知识点 @王东硕

5.虚拟答题场 @韩佳伟

6.题库和答题场关联 @韩佳伟

7.虚拟模块 @drinking

8.虚拟ucid @drinking

9.认证日 @drinking



### 压测脚本：

1.正常城市抽题 虚拟模块+虚拟ucid @钱丽美

2.虚拟城市走完交卷解析 虚拟模块+虚拟ucid @钱丽美



### 数据清理：

1.知考数据清理--黑接口 确认是否还可用 @韩佳伟

2.知贝数据清理 新增黑接口 @韩佳伟



可能遇到的问题：

1.es抽题性能  

2.压测有问题，具体情况具体分析（优化/不切答题场），有开关



### 线上遇到问题预案：

1. 性能问题：

- 业务降级 关练习

- 非中间件 扩容

2. bug

- 严重 前端停服页面，关认证，关练习

- 少量 修复上线



### 压测参数

压测题库：134

压测答题场id：26

抽题单元id：86～91

虚拟城市：哥谭市 109962

考试Id：-48846

模块ID与抽题单元ID映射,压测使用的模块ID取10000~10005

```
  fakeCity: 109962
  fakeStageId: 26
  testModuleMapper:
    10000: 86
    10001: 87
    10002: 88
    10003: 89
    10004: 90
    10005: 91
```



